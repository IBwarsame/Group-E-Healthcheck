{% load static %}

<!DOCTYPE html>
<html>
    <head>
        <title>Home</title>
        <script
            src="https://kit.fontawesome.com/b4269277b2.js"
            crossorigin="anonymous"
        ></script>

        <link
            rel="stylesheet"
            href="{% static 'healthcheck/css/home.css' %}"
        />
        <style>
            .live-reports {
                display: flex;
                justify-content: space-around;
                align-items: center;
            }

            .graph {
                width: 45%;
            }

            canvas {
                width: 100% !important;
                height: auto !important;
            }
        </style>
    </head>
    <body class="home">
        {% include 'navbar.html' %}

        <div class="header">
            <h1>Health Check</h1>
            <p>Welcome to the Health Check application,  {{ user.username }}! </p>
        <div>

            <h2>Dashboard</h2> 
            
            <a href="{% url 'card_form' %}" class="btn">Go to Card Forms</a>


            <div class="dashboard">
                <h2>Live Reports and Graphs</h2>
                <div class="live-reports">
                    <div class="graph">
                        <h3>Performance Overview</h3>
                        <canvas id="performanceChart"></canvas>
                    </div>
                    <div class="graph">
                        <h3>Usage Statistics</h3>
                        <canvas id="usageChart"></canvas>
                    </div>
                </div>
            </div>

            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <script>
                // Performance Chart
                const performanceCtx = document.getElementById('performanceChart').getContext('2d');
                new Chart(performanceCtx, {
                    type: 'line',
                    data: {
                        labels: ['January', 'February', 'March', 'April', 'May'],
                        datasets: [{
                            label: 'Performance',
                            data: [65, 59, 80, 81, 56],
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 2,
                            fill: false
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                display: true
                            }
                        }
                    }
                });

                // Usage Chart
                const usageCtx = document.getElementById('usageChart').getContext('2d');
                new Chart(usageCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'],
                        datasets: [{
                            label: 'Usage',
                            data: [12, 19, 3, 5, 2],
                            backgroundColor: 'rgba(153, 102, 255, 0.6)',
                            borderColor: 'rgba(153, 102, 255, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                display: true
                            }
                        }
                    }
                });
                
               
            </script>
               
                
            </div>

<div class="footer">
        {% if user.is_authenticated %}
        <p>Email: {{ user.email }}</p>
        <p>Last login: {{ user.last_login }}</p>
        <p>Role: {{ user.role }}</p>
        <a href="{% url 'logout' %}">Logout</a>
        {% else %}
        <p>Please log in to see your details.</p>
        <a href="{% url 'login' %}">Login</a>
        <a href="{% url 'register' %}">Register</a>
        {% endif %}
</div>

    </body>
</html>
